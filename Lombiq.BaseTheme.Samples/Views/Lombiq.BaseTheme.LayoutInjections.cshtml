@using Lombiq.BaseTheme.Services
@using ResourceNames = Lombiq.BaseTheme.Samples.Constants.ResourceNames
@using Microsoft.AspNetCore.Authorization
@using Lombiq.BaseTheme.Constants
@using FeatureIds = Lombiq.BaseTheme.Samples.Constants.FeatureIds

@inject ICssClassHolder CssClassHolder
@inject IAuthorizationService AuthorizationService

@{
    // You can use ICssClassHolder to add CSS classes to the zone wrapper elements. For example this can be used to
    // add Bootstrap utility classes or shared classes across certain zones.
    CssClassHolder.AddClassToZone(ZoneNames.Footer, "text-center");
    CssClassHolder.AddClassToZone(ZoneNames.AsideFirst, "layoutAside");
    CssClassHolder.AddClassToZone(ZoneNames.AsideSecond, "layoutAside");
}

@* This file is rendered in the <head> of Layout.cshtml after title and meta tags, but before resource injection. So you
   can still use the resource tag helpers, as well as other <head> resources like a favicon.
   Don't forget to inject your root style like below, it is the only required content for this shape. *@
<style asp-name="@ResourceNames.Site"></style>
<link type="image/x-icon" rel="shortcut icon" href="~/@FeatureIds.Area/icons/favicon.ico" />

<layout-zone name="@ZoneNames.Header">
    <p>@T["Here you can easily inject shapes into the zones, kind of like always enabled widgets."]</p>
</layout-zone>

@* We use the <layout-zone> tag helper so we can coexist with the prerendered shapes, e.g. from a widget. *@
<layout-zone name="@ZoneNames.Footer" position="0">
    @T["Â© 2022 <a href=\"https://lombiq.com/\">Lombiq Technologies</a>"]
</layout-zone>

@* You can even include shapes conditionally. In this case we want a link to the admin dashboard but only for users who
   are able to access it. Using this approach can be much easier than implementing a custom layer condition. *@
@if (await AuthorizationService.AuthorizeAsync(User, OrchardCore.Admin.Permissions.AccessAdminPanel))
{
    <layout-zone name="@ZoneNames.Footer" position="1">
        <div class="text-center">
            <a href="@Url.Content("~/Admin")">@T["Admin Dashboard"]</a>
        </div>
    </layout-zone>
}
